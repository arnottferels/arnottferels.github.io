import{E as T,R as E,d as A,e as a,f as R,g as _}from"./const.mjs";import"./events.mjs";const s="span",d="data-title-url",f=/https?:\/\//i,m=/\s+/,u=t=>{try{const{origin:e,pathname:r}=new URL(t),s=15,n=`${e}${r.length>s?`/...${r.slice(3-s)}`:r}`;return n.endsWith("/")?n.slice(0,-1):n}catch{return t}},g=(t,e)=>{const r=t.cloneNode(!0);r.querySelectorAll(e).forEach((t=>t.remove()));return r.innerText.trim().replace(/https?:\/\/[^\s]+/g,u)},h=t=>{const e=t.closest(s),r=t.getAttribute("href");if(e&&r){const t=document.getElementById(r.replace(/^#/,""));if(t){const r=g(t,`[${_}]`);e.setAttribute(a,r),e.toggleAttribute(R,r.split(m).length>10),e.toggleAttribute(d,f.test(t.innerHTML))}}},c=()=>{document.querySelector(`[${E}]`)&&document.querySelectorAll(`${s} > [${A}]`).forEach((t=>h(t)))},L=()=>{c(),T.forEach((t=>document.addEventListener(t,c)))};L();