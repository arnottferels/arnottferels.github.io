import{aa as N,y as B,ab as P,ac as _,ad as S,ae as g,af as T,ag as v,ah as F,ai as U,H as d,E as f,aj as w,ak as I,a as c,c as O,a7 as k,al as x,am as H,an as $,F as G,ao as r,ap as M,aq as q,ar as V,as as K,p as X}from"./const.mjs";import{I as u}from"./media.mjs";import{b as j,c as Y,d as W,i as J,a as z}from"./key.mjs";import"./events.mjs";const Q={element:`#${S}`,baseUrl:"/",debounceTimeoutMs:500,resetStyles:!1,showEmptyFilters:!1,excerptLength:10,showImages:!0,showSubResults:!0,translations:{placeholder:"Type to search..."},ranking:{pageLength:0,termFrequency:1,termSimilarity:1,termSaturation:1.4}},Z=()=>new PagefindUI(Q),ee=()=>{const e=document.querySelectorAll(P),t=document.querySelectorAll(_),a=e=>{e.length>1&&Array.from(e).slice(0,-1).forEach((e=>e.parentNode?.removeChild(e)))};a(e),a(t)},A=()=>{Z(),ee()},te=()=>{u&&N.forEach((e=>document.addEventListener(e,A))),window.addEventListener(B,A)};te();const se="assets",ae=`/${se}/data/image.json`,p="alt",ne=async()=>{try{const e=await fetch(ae);if(!e.ok)return[];const t=await e.json();return t.push(w),t}catch{return[]}},y=async e=>{const t=await ne(),a=e.getAttribute(p);t.some((e=>a?.includes(e)))?e.setAttribute(T,v):e.removeAttribute(T)},R=async e=>{await y(e),oe(e),C.observe(e,{attributes:!0})},C=new MutationObserver((e=>{e.forEach((({attributeName:e,target:t,addedNodes:a})=>{t&&e===p&&y(t),a.forEach((e=>{e&&e.classList.contains(g.replace(".",""))&&R(e)}))}))})),oe=async e=>{const t=e.closest(F);if(!t)return;const a=t.parentElement?.querySelector(`${U} ${d}`);if(a){const s=document.createElement(d);s.href=a.href,s.style.display="block",s.style.width="auto",s.style.height=`${e.height}px`,t.replaceChild(s,e),s.appendChild(e)}},ce=async()=>{const e=document.body,t=e.querySelectorAll(`#${I} ${g}`);await Promise.all(Array.from(t).map(R)),C.observe(e,{childList:!0,subtree:!0})},re=()=>u&&f.forEach((e=>document.addEventListener(e,ce)));re();const h="data-blur",ie=()=>{const e=window.location.pathname,t=new RegExp(`${M}?$`);return k.has(e)||t.test(e)},le=()=>document.getElementById(S),m=()=>document.getElementById(I),L=()=>document.getElementById(x),Ee=()=>document.getElementById(H),ue=()=>document.querySelector(`[${q}]`),b=e=>{const t=m();t&&(t.style.display=e?"block":"none")},D=e=>{[V,K,X].forEach((t=>{document.querySelectorAll(`[${t}]`).forEach((t=>{const a=t;e?(a.setAttribute(h,"true"),sessionStorage.setItem(r,"true"),a.style.filter="blur(10px)"):(a.setAttribute(h,"false"),sessionStorage.setItem(r,"false"),a.style.filter="none")}))}))},i=e=>{const t=m(),a=!t||"block"!==t.style.display;if(b(a),D(a),a){const e=document.querySelector(_);e&&e.focus()}e.stopPropagation()},l=()=>{b(!1),D(!1)},E=()=>{const e=document.querySelector($);if(e){const t=new MouseEvent(c,{bubbles:!0,cancelable:!0});e.dispatchEvent(t)}},me=e=>{const t=m(),a=L(),s=ue(),n=e.target,o=s?.contains(n);(!t?.contains(n)&&!a?.contains(n)&&!o||n.matches(G))&&l()},Te=e=>{(j(e)||Y(e))&&(e.preventDefault(),E(),i(e)),W(e)&&(e.preventDefault(),l()),(J(e)||z(e))&&"true"===sessionStorage.getItem(r)&&l()},de=()=>{ie()||le()&&(document.addEventListener(c,me),document.addEventListener(O,Te));const e=L(),t=Ee();e?.addEventListener(c,(e=>{E(),i(e)})),t?.addEventListener(c,(e=>{E(),i(e)}))},Ae=()=>u&&f.forEach((e=>document.addEventListener(e,(()=>de()))));Ae();