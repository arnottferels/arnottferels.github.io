import{aA as _,E as S,y as f,V as T,a as p,aq as O,aB as I,aC as a,aD as m,U as h,Q as R}from"./const.mjs";import"./events.mjs";const d=e=>{const t={};for(let s=0;s<e.length;s++){const o=e[s],n=e[(s+1)%e.length];o&&n&&(t[o]={nextTheme:n})}return t},g=()=>document.querySelector(`[${O}]`),A=()=>document.documentElement.getAttribute(I)===T[1],l=e=>{const t=A(),s=sessionStorage.getItem(a),o=sessionStorage.getItem(m);let n,r=e;n=t?T[1]:s?o:r,t?sessionStorage.setItem(a,"true"):sessionStorage.removeItem(a),sessionStorage.setItem(m,r),localStorage.setItem(h,n),document.documentElement.setAttribute(R,n);const l=g();if(l){const e=c[n]?.nextTheme;l.textContent=e??""}},E=()=>{c=d(T);const e=()=>{const e=T[0],t=localStorage.getItem(h);return T.includes(t)?t:e};l(e());const t=g(),s=A();if(t){const o=()=>c[e()]?.nextTheme,n=()=>t.title=`Change to ${o()} mode`;n(),t.addEventListener(p,(()=>{l(o()),n()})),s&&(t.disabled=!0,t.style.background="transparent",t.style.cursor="help",t.title="The project only supports the dark theme by default.",t.style.color="#737373")}},L=()=>{![..._].includes(window.location.pathname)&&(S.forEach((e=>document.addEventListener(e,E))),window.addEventListener(f,E))};let c=d(T);L();